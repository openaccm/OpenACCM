const a0_0x58a248=a0_0x56bc;function a0_0x56bc(_0x5b864a,_0xa09882){const _0x1a9a62=a0_0x1a9a();return a0_0x56bc=function(_0x56bcee,_0x17df30){_0x56bcee=_0x56bcee-0xba;let _0x5abc5c=_0x1a9a62[_0x56bcee];return _0x5abc5c;},a0_0x56bc(_0x5b864a,_0xa09882);}function a0_0x1a9a(){const _0x900d90=['BlockManager','10pnDGDg','linked_config_ids','extend','execute_default_script','bus','render','listenTo','addType','removeResizeListener','7045LsAeiG','renderChart','15047361YmZEUO','origin_value','off','removed','onSeriesClick','type','initialize','set','_onChangeConfigId','name','xAxis','drill_down_config','76zzgAMZ','onResize','2878704MpBdII','29786273zIAhbx','DomComponents','isComponent','add','bind','3137564QrrrSH','enable_drill_down','content','apply','data','get_theme_name','trigger','getTime','get','get_widget','prototype','default_template','345827nBzwUl','chart','trigger_up','componentType','label','init','search_sensitive','1896wnvtfD','length','model','chart_type','traits','config_id','dispose','_onThemeChanged','7UHkMLS','define','_onResize','34152dIZtFy','BaseModel','addResizeListener','get_category_by_index','preventDefault','value','setOption','initResizeListener'];a0_0x1a9a=function(){return _0x900d90;};return a0_0x1a9a();}(function(_0x22cc8e,_0xb43e41){const _0x1e91b4=a0_0x56bc,_0x1d02ba=_0x22cc8e();while(!![]){try{const _0x48f397=parseInt(_0x1e91b4(0xc1))/0x1+parseInt(_0x1e91b4(0xf3))/0x2*(parseInt(_0x1e91b4(0xd3))/0x3)+-parseInt(_0x1e91b4(0xfb))/0x4+parseInt(_0x1e91b4(0xe5))/0x5*(-parseInt(_0x1e91b4(0xc8))/0x6)+-parseInt(_0x1e91b4(0xd0))/0x7*(-parseInt(_0x1e91b4(0xf5))/0x8)+-parseInt(_0x1e91b4(0xe7))/0x9+-parseInt(_0x1e91b4(0xdc))/0xa*(-parseInt(_0x1e91b4(0xf6))/0xb);if(_0x48f397===_0xb43e41)break;else _0x1d02ba['push'](_0x1d02ba['shift']());}catch(_0x41afe8){_0x1d02ba['push'](_0x1d02ba['shift']());}}}(a0_0x1a9a,0xe6998),odoo[a0_0x58a248(0xd1)]('mana_dashboard.chart_builder',function(require){'use strict';const _0x1cb645=a0_0x58a248;const _0x5361e1=require('mana_dashboard.block_base'),_0x20e127=_0x5361e1[_0x1cb645(0xd4)],_0xbbfd=_0x5361e1['BaseView'],_0x235a82=require('mana_dashboard.resize_manager'),_0x15c182=_0x235a82[_0x1cb645(0xd5)],_0x1fdfb3=_0x235a82[_0x1cb645(0xe4)];var _0x29eb5a=require('web.core'),_0x340b4d=_0x29eb5a['_t'];const _0xfb2dbb=function(_0x4c5451){const _0x217117=_0x1cb645;let _0x379124=_0x20e127['extend']({'defaults':{..._0x20e127[_0x217117(0xbf)]['defaults'],'classes':['mana_chart',_0x4c5451[_0x217117(0xcb)]],'attributes':{'config_id':undefined,'chart_type':_0x4c5451[_0x217117(0xcb)]},'droppable':![],'traits':_0x4c5451[_0x217117(0xcc)]||[],'resizable':{'tl':0x0,'tc':0x1,'tr':0x0,'cl':0x0,'cr':0x0,'bl':0x0,'bc':0x1},'default_option':_0x4c5451['default_option'],'chart_type':_0x4c5451['chart_type'],'default_template':_0x4c5451[_0x217117(0xc0)],'template_category':_0x4c5451['template_category'],'template_type':_0x4c5451['template_type'],'search_sensitive':_0x4c5451[_0x217117(0xc7)],'enable_drill_down':_0x4c5451[_0x217117(0xfc)]||![],'script_execute_mode':'immediately'},'initialize'(){const _0x149363=_0x217117;_0x20e127[_0x149363(0xbf)][_0x149363(0xed)]['apply'](this,arguments),this['on']('change_date_range',()=>{const _0x53f1c5=_0x149363;this[_0x53f1c5(0xbb)]('change:chart_option');}),this['listenTo'](this,'change:attributes:config_id',this[_0x149363(0xef)]);},'_onChangeConfigId'(){const _0x38a179=_0x217117;this[_0x38a179(0xee)]('chart_option',this[_0x38a179(0xbd)]('default_option'));}},{'isComponent':_0x4c5451[_0x217117(0xf8)]}),_0x302204=_0xbbfd[_0x217117(0xde)]({'init'(){const _0x469a91=_0x217117;_0xbbfd[_0x469a91(0xbf)][_0x469a91(0xc6)][_0x469a91(0xfe)](this,arguments),this[_0x469a91(0xc2)]=null,this[_0x469a91(0xd2)]=this[_0x469a91(0xf4)][_0x469a91(0xfa)](this),this[_0x469a91(0xe2)](this[_0x469a91(0xca)],'change:chart_option',this['_onOptionChanged']),_0x29eb5a[_0x469a91(0xe0)]['on']('mana_dashboard.theme_changed',this,this[_0x469a91(0xcf)]);},'initResizeListener'(){const _0x2abf6e=_0x217117;_0x1fdfb3(this['el'],this[_0x2abf6e(0xd2)]),_0x15c182(this['el'],this[_0x2abf6e(0xd2)]);},'_onThemeChanged'(){const _0x7fc949=_0x217117;this[_0x7fc949(0xc2)]&&(this[_0x7fc949(0xc2)][_0x7fc949(0xce)](),this[_0x7fc949(0xc2)]=null),setTimeout(()=>{const _0x5a114f=_0x7fc949;this[_0x5a114f(0xe1)]();},0x0);},'beforeScriptExecuted'(){const _0x5d64bc=_0x217117;this[_0x5d64bc(0xca)]['set']('chart_option',null,{'silent':!![]});},'afterScriptExecuted'(){const _0x5ce6dc=_0x217117;this['chart']&&this[_0x5ce6dc(0xc2)]['resize']();let _0x1cdb71=this[_0x5ce6dc(0xca)][_0x5ce6dc(0xbd)]('attributes')[_0x5ce6dc(0xcd)];if(!_0x1cdb71)return;let _0x2953c3=this[_0x5ce6dc(0xca)][_0x5ce6dc(0xbd)]('loading_config');if(_0x2953c3)return;if(this['model'][_0x5ce6dc(0xbd)]('has_script')&&this[_0x5ce6dc(0xca)][_0x5ce6dc(0xbd)]('script')){let _0x5f36f8=this[_0x5ce6dc(0xca)][_0x5ce6dc(0xbd)]('chart_option');if(!_0x5f36f8){let _0x34d3f4=this[_0x5ce6dc(0xca)]['get']('default_scripts');!_0x34d3f4?this[_0x5ce6dc(0xca)][_0x5ce6dc(0xee)]('chart_option',this['model'][_0x5ce6dc(0xbd)]('default_option')):setTimeout(()=>{const _0x55aed5=_0x5ce6dc;this[_0x55aed5(0xca)][_0x55aed5(0xdf)]();},0x0);}}},'_onOptionChanged'(){const _0x38a5cc=_0x217117;let _0xe55507=this[_0x38a5cc(0xca)][_0x38a5cc(0xbd)]('chart_option');this[_0x38a5cc(0xc2)]&&_0xe55507?this['chart'][_0x38a5cc(0xd9)](_0xe55507,!![]):this[_0x38a5cc(0xe6)](_0xe55507);},'onResize'(_0x1f665e){const _0xee10cb=_0x217117;if(!this['chart'])return;let _0x3790ce=this[_0xee10cb(0xca)][_0xee10cb(0xbd)]('is_dragging');if(_0x3790ce)return;_['debounce'](()=>{this['resizeChart']();},0x64)();},'resizeChart'(){const _0x131132=_0x217117;this[_0x131132(0xc2)]&&(_0x1fdfb3(this['el'],this[_0x131132(0xd2)]),this[_0x131132(0xc2)]['resize'](),setTimeout(()=>{_0x15c182(this['el'],this['_onResize']);},0x0));},'handleClick'(_0x2d28d5){const _0x14423c=_0x217117;_0x2d28d5[_0x14423c(0xd7)]();},'renderChart'(_0x44c5c9){const _0x4e90c6=_0x217117;if(!this[_0x4e90c6(0xc2)]){let _0x4366dc=this[_0x4e90c6(0xca)][_0x4e90c6(0xbd)]('theme_name');_0x4366dc&&(this['chart']=echarts[_0x4e90c6(0xc6)](this['el'],_0x4366dc));let _0x49d728=this[_0x4e90c6(0xbe)]();if(_0x49d728){let _0x54713e=_0x49d728[_0x4e90c6(0xba)]();_0x54713e&&(this[_0x4e90c6(0xc2)]=echarts[_0x4e90c6(0xc6)](this['el'],_0x54713e));}!this[_0x4e90c6(0xc2)]&&(this['chart']=echarts[_0x4e90c6(0xc6)](this['el']));}_0x44c5c9&&this[_0x4e90c6(0xc2)][_0x4e90c6(0xd9)](_0x44c5c9),this['chart']['on']('click',_0x590c45=>{const _0x477203=_0x4e90c6;_0x590c45[_0x477203(0xc4)]==='series'&&this[_0x477203(0xeb)](_0x590c45);});},'onSeriesClick'(_0x4a4540){const _0x405512=_0x217117;let _0x1bdc90=_0x4a4540['dataIndex'],_0x2bd198=_0x4a4540[_0x405512(0xf0)],_0x131b3a=_0x4a4540[_0x405512(0xd8)],_0x53857a=this[_0x405512(0xca)][_0x405512(0xbd)]('chart_option'),_0x464244=_0x4a4540[_0x405512(0xff)];if(_0x464244&&typeof _0x464244==='object')_0x464244[_0x405512(0xe8)]&&(_0x2bd198=_0x464244['origin_value']);else{if(_0x53857a[_0x405512(0xd6)])_0x2bd198=_0x53857a[_0x405512(0xd6)](_0x1bdc90);else{let _0x2784c1=_0x53857a[_0x405512(0xf1)],_0xe29601=_0x2784c1&&_0x2784c1['data']&&_0x2784c1['data'][_0x1bdc90];_0xe29601&&(typeof _0xe29601==='object'&&_0xe29601[_0x405512(0xe8)]&&(_0x2bd198=_0xe29601[_0x405512(0xe8)]));}}let _0x1685d2=this[_0x405512(0xca)][_0x405512(0xbd)]('config'),_0x455a40=_0x1685d2[_0x405512(0xf2)];if(_0x455a40){let _0x306ff2=parseInt(_0x455a40[0x0]);this[_0x405512(0xc3)]('mana_dashboard.drill_down',{'config_id':_0x306ff2,'category':_0x2bd198,'model':this['model'],'value':_0x131b3a});}else _0x1685d2[_0x405512(0xdd)]&&_0x1685d2[_0x405512(0xdd)][_0x405512(0xc9)]>0x0?this['trigger_up']('mana_dashboard.linked_actions',{'linked_config_ids':_0x1685d2['linked_config_ids'],'category':_0x2bd198,'model':this[_0x405512(0xca)],'value':_0x131b3a}):this['trigger_up']('mana_dashboard.view_chart_data',{'category':_0x2bd198,'model':this[_0x405512(0xca)],'value':_0x131b3a,'params':_0x4a4540});},'setOption'(_0x133ab5){const _0x2273cc=_0x217117;_0x133ab5['timestamp']=new Date()[_0x2273cc(0xbc)](),this[_0x2273cc(0xca)][_0x2273cc(0xee)]('chart_option',_0x133ab5);},'set_option'(_0x139056){const _0xc7571a=_0x217117;this[_0xc7571a(0xd9)](_0x139056);},'setChartOption'(_0x71dab){const _0x400490=_0x217117;this[_0x400490(0xd9)](_0x71dab);},'set_chart_option'(_0x5989f3){const _0x4f9195=_0x217117;this[_0x4f9195(0xd9)](_0x5989f3);},'getDataSource'(_0x1c04e0=0x0){return this['get_data_source'](_0x1c04e0);},'setChartOption'(_0x4bcb17){const _0x2491f2=_0x217117;_0x4bcb17['timestamp']=new Date()['getTime'](),this[_0x2491f2(0xca)][_0x2491f2(0xee)]('chart_option',_0x4bcb17);},'removed'(){const _0x2e739d=_0x217117;_0xbbfd[_0x2e739d(0xbf)][_0x2e739d(0xea)][_0x2e739d(0xfe)](this,arguments),_0x29eb5a[_0x2e739d(0xe0)][_0x2e739d(0xe9)]('mana_dashboard.theme_changed',this,this[_0x2e739d(0xcf)]),_0x1fdfb3(this['el'],this[_0x2e739d(0xd2)]),this[_0x2e739d(0xc2)]&&(this[_0x2e739d(0xc2)][_0x2e739d(0xce)](),this[_0x2e739d(0xc2)]=null);},'render'(..._0x5b6b4a){const _0x367acd=_0x217117;_0xbbfd[_0x367acd(0xbf)][_0x367acd(0xe1)]['apply'](this,_0x5b6b4a);this[_0x367acd(0xc2)]&&(this[_0x367acd(0xc2)][_0x367acd(0xce)](),this['chart']=null);let _0x5d5fb8=null,_0x48bdfa=this[_0x367acd(0xca)]['get']('config');if(_0x48bdfa&&!this[_0x367acd(0xca)][_0x367acd(0xbd)]('loading_config')){_0x5d5fb8=this[_0x367acd(0xca)][_0x367acd(0xbd)]('chart_option');if(!_0x5d5fb8){let _0x5e0a14=this[_0x367acd(0xca)][_0x367acd(0xbd)]('default_scripts');!_0x5e0a14&&(_0x5d5fb8=this[_0x367acd(0xca)]['get']('default_option'));}_0x5d5fb8&&(this[_0x367acd(0xca)][_0x367acd(0xee)]('chart_option',_0x5d5fb8,{'silent':!![]}),this[_0x367acd(0xe6)](_0x5d5fb8));}return this[_0x367acd(0xda)](),this;}});return(_0x589295,_0x3eaf4d={})=>{const _0x574c2f=_0x217117;var _0x561b8f=_0x589295[_0x574c2f(0xf7)];_0x589295[_0x574c2f(0xdb)][_0x574c2f(0xf9)](_0x4c5451[_0x574c2f(0xec)],{'label':_0x4c5451[_0x574c2f(0xc5)],'category':_0x340b4d('Charts'),'select':!![],'render':_0x4c5451[_0x574c2f(0xe1)],'content':_0x4c5451[_0x574c2f(0xfd)]}),_0x561b8f[_0x574c2f(0xe3)](_0x4c5451[_0x574c2f(0xcb)],{'model':_0x379124,'view':_0x302204});};};return _0xfb2dbb;}));